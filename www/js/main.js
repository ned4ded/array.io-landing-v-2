"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}document.addEventListener("DOMContentLoaded",function(){document.querySelector("html").classList.remove("no-js");var e=Array.from(document.querySelectorAll("[data-toggle-on]")).map(function(e){var t=e.dataset.toggleOn?JSON.parse(e.dataset.toggleOn):[],n=e.dataset.toggleOff?JSON.parse(e.dataset.toggleOff):[];return{toggler:e,on:t.map(function(e){return document.getElementById(e)}),off:n.map(function(e){return document.getElementById(e)})}});e.forEach(function(e){var n=e.toggler,i=e.on,o=e.off;n.addEventListener("click",function t(e){e.preventDefault(),n.removeEventListener("click",t),anime({targets:n,opacity:[1,0],duration:500,easing:"linear",height:"ido-more"==n.getAttribute("id")?[n.firstElementChild.scrollHeight,0]:null,complete:function(e){n.dataset.visible=!1,i.forEach(function(t,e){e.dataset.visible=!0,"ido-more"==e.getAttribute("id")?anime({targets:e,opacity:[0,1],height:[0,e.firstElementChild.scrollHeight],duration:500,easing:"linear",complete:function(e){t()}}):anime({targets:e,opacity:[0,1],duration:500,easing:"linear",complete:function(e){t()}})}.bind(null,function(){n.addEventListener("click",t)}))}}),o.forEach(function(t){return anime({targets:t,opacity:[1,0],duration:500,easing:"linear",complete:function(e){t.dataset.visible=!1}})})})});var t=function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"closed",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500,i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];_classCallCheck(this,o),this.el=e,this.openTime=n,this.vacate(),this.setState(t,i)}return _createClass(o,[{key:"setState",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];switch(e){case"open":this.state="open";break;case"closed":this.state="closed";break;case"opening":this.state="opening";break;case"closing":this.state="closing";break;default:return new Error("ModalWindow: Wrong State")}return t&&this.notify(),this}},{key:"notify",value:function(){this.el.dataset.animationProcess=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(e){return this.getState()===e}},{key:"open",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(this.occupy(),this.setState("opening"),setTimeout(function(){return e.setState("open"),e.vacate(),t()},this.openTime),this)}},{key:"close",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return e.setState("closed"),e.vacate(),t()},this.openTime),this)}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}}]),o}(),i=function(e){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"closed",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:500;_classCallCheck(this,r);var o=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,n,i,!1));return o.listener=function(e){e.preventDefault()},o.lining=t,o.notify(),o}return _inherits(r,t),_createClass(r,[{key:"notify",value:function(){this.el.dataset.modalState=this.state,this.lining.dataset.modalState=this.state}},{key:"open",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(window.addEventListener("touchmove",this.listener),window.addEventListener("wheel",this.listener),this.occupy(),this.setState("opening"),setTimeout(function(){return e.setState("open"),e.vacate(),t()},this.openTime),this)}},{key:"close",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return e.setState("closed"),e.vacate(),window.removeEventListener("touchmove",e.listener),window.removeEventListener("wheel",e.listener),t()},this.openTime),this)}}]),r}(),n=function(){function i(e){var t=this;_classCallCheck(this,i),this.pause=function(){t.animation.pause(),t.animation=null,window.removeEventListener("wheel",t.pause),window.removeEventListener("touchstart",t.pause)},this.link=e;var n=this.link.getAttribute("href");if(!n||"#"!==n.slice(0,1))throw new Error("SmoothScroll: Wrong element passed");this.target=document.getElementById(n.slice(1)),this.link.addEventListener("click",function(e){e.preventDefault(),t.go()})}return _createClass(i,[{key:"getCurrentPosition",value:function(e){return this.target?(window.scrollY||document.documentElement.scrollTop)+this.target.getBoundingClientRect().top:0}},{key:"go",value:function(){var e=this;this.animation=anime({targets:[document.body,document.documentElement],scrollTop:this.getCurrentPosition(),duration:600,easing:"easeInOutQuart",autoplay:!1,complete:function(){window.removeEventListener("wheel",e.pause),window.removeEventListener("touchstart",e.pause)}}),window.addEventListener("wheel",this.pause),window.addEventListener("touchstart",this.pause),this.animation.restart()}}]),i}(),o=(Array.from(document.querySelectorAll("[data-smooth-scroll]")).forEach(function(e){return new n(e)}),new t(document.querySelector('[data-animation-process-name="cube"]'),"open")),r=document.querySelector(".jumbotron__slogan");setTimeout(function(){o.close(function(){r.classList.remove("jumbotron__slogan--hidden")})},3e3);var s=document.getElementById("instruction-steps"),a=document.getElementById("instruction-steps-prev"),c=document.getElementById("instruction-steps-next"),u=(s&&new Swiper(s,{simulateTouch:!1,observer:!0,observeParents:!0,navigation:{prevEl:a,nextEl:c}}),document.getElementById("lining"));Array.from(document.querySelectorAll("[data-modal-toggler]")).map(function(e){var t=e.dataset.modalToggler,n=document.getElementById(t);return n?{toggler:e,modal:new i(n,u)}:null}).forEach(function(e){var n=e.toggler,i=e.modal,o=function e(t){t.preventDefault(),n.removeEventListener("click",e),i.open(function(){u.addEventListener("click",r)})},r=function e(t){t.preventDefault(),u.removeEventListener("click",e),i.close(function(){n.addEventListener("click",o)})};n.addEventListener("click",o)});Array.from(document.querySelectorAll("[data-levitate]")).reduce(function(e,t){return setTimeout(function(){anime({targets:t,top:["10px","-10px"],loop:!0,direction:"alternate",easing:"easeInOutCubic",duration:1e3,delay:0})},e),e+200},0)},!1);
//# sourceMappingURL=main.js.map
